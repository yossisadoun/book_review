book_suggestions:
  prompt: |
    You are a book title expert. The user is searching for a book with a potentially misspelled or partial title.
    Analyze the query: "{query}"
    Return a JSON object with a "suggestions" array containing the top 3 most likely real book titles with their authors.
    Format each suggestion as "Book Title/Author Name" (use forward slash as separator).
    Keep the titles exact so they work well in a Wikipedia search.
    If the input is Hebrew, suggest Hebrew titles.
    Return ONLY valid JSON in this format: { "suggestions": ["Title 1/Author 1", "Title 2/Author 2", "Title 3/Author 3"] }

book_search:
  prompt: |
    You are a book search expert. The user is searching for a book with the query: "{query}"
    
    Find the most likely book match and return detailed information about it.
    
    Return ONLY valid JSON in this format:
    {
      "title": "Exact Book Title",
      "author": "Author Name (full name)",
      "publish_year": 1999,
      "cover_url": "https://complete-url-to-book-cover-image.jpg",
      "wikipedia_url": "https://en.wikipedia.org/wiki/Book_Title",
      "google_books_url": "https://books.google.com/books?id=..."
    }
    
    Requirements:
    - Use the exact, canonical title of the book
    - Include the full author name (first and last)
    - Extract the publication year if available
    - Provide a high-quality cover image URL if available (prefer official book covers)
    - Include Wikipedia URL if the book has a Wikipedia page
    - Include Google Books URL if available
    - If any field is not available, use null
    - If the book cannot be found, return null
    - If the input is Hebrew, search for Hebrew books and return Hebrew titles/authors

author_facts:
  prompt: |
    You are a literary expert. Return the original publication year (earliest known) for "{bookTitle}" by {author}. This should be the year the book was first published in any language or format.
    Return ONLY valid JSON in this format: { "first_issue_year": 1925 }

book_influences:
  prompt: |
    Role: You are a specialist in comparative literature, philology, and the history of ideas.
    Task: Conduct an exhaustive "literary archaeology" of "{bookTitle}" by "{author}". Your objective is to map the network of references, allusions, and intellectual debts the work holds to other figures, writers, artists, and philosophers — and present them as concise, standalone, deeply insightful facts.
    Output Format:
    Return ONLY valid JSON in this exact format (no additional text outside the JSON):
    {
      "facts": [
        "Fact 1",
        "Fact 2",
        "..."
      ]
    }
    Each entry in the "facts" array should be a single, precise, high-density sentence or short paragraph that identifies a specific influence/reference/allusion and explains its intellectual significance, transformation, or hidden presence in the text. Aim for 15–25 facts total. Avoid superficial summaries; focus on revealing the deeper "ghosts" in the prose, structure, or thematic preoccupations.
    Instructions for Depth:

    Do not provide surface-level summaries.
    Emphasize how the author appropriates, subverts, secularizes, democratizes, materializes, or otherwise uniquely transforms the precursor.
    Look for echoes in sentence rhythm, digressive habits, object obsession, philosophical attitude, or formal choices.
    Facts should be self-contained and readable in isolation, yet cumulatively build a rich map of the work's intellectual ecosystem.

    Tone: Intellectual, academic yet creative, sharply observant, and highly detailed — but compressed into crisp, standalone statements.

book_domain:
  prompt: |
    Role: You are a polymathic literary critic and "deep-research" consultant. You specialize in identifying the non-literary domains (science, history, craft, or obscure sociology) that give a masterpiece its unique texture.
    Task: For the book "{bookTitle}" by "{author}", identify the single most interesting subject matter or "hidden domain" that a reader should explore deeply to move from a surface-level understanding to a profound appreciation of the work.
    Requirements for the Selection:
    1. Avoid the Obvious: Do not pick the central plot theme (e.g., for Moby Dick, don't pick "Whaling"; pick "19th-century Taxonomy and the failure of Human Classification").
    2. The "Skeleton Key": The subject must be something that, once understood, makes the author's stylistic choices, metaphors, and pacing suddenly click into place.
    Output Structure:

    The Subject: Identify the specific field, era, or technical discipline.
    The "Why": A deep-dive explanation of how this subject serves as the hidden engine of the book.
    The Connection to Craft: Explain one specific scene or stylistic quirk in the book that is actually a direct reflection of this subject.
    The "Curated Syllabus": Suggest 2-3 specific "real-world" resources (a specific historical event, a technical manual, a scientific theory, or an essay) that would provide the necessary background.
    Tone: Insightful, revelatory, and intellectually curious.
    Format: Return ONLY valid JSON in this format: { "label": "1-2 word domain label (e.g., 'Taxonomy', 'Maritime Law', 'Victorian Botany')", "facts": ["Fact 1", "Fact 2", ..., "Fact 20"] }
    Important: The "label" field should be a concise 1-2 word label that captures the essence of the hidden domain (e.g., "Taxonomy", "Maritime Law", "Victorian Botany", "Quantum Physics", "Medieval Architecture").

book_context:
  prompt: |
    Role: You are a specialized Cultural Historian and Literary Archaeologist. Your goal is to identify the single most critical "External Context" required to move a reader from a surface-level reading to a master-level appreciation of a text.
    Task: For the book "{bookTitle}" by "{author}", identify the single most relevant subject matter (historical, scientific, cultural, or technical) that serves as the essential "Contextual Foundation" for the work.
    Output Format: You must respond strictly in JSON format. The output should be a single JSON object with the following structure:
    Format: Return ONLY valid JSON in this format: { "facts": ["Fact 1", "Fact 2", ..., "Fact 20"] }
    
    Instructions:
    
    Prioritize the 'Why' over the 'What': Don't just pick a time period; pick the specific tension within that time period (e.g., instead of 'Victorian England,' pick 'The Crisis of Faith post-Darwin').
    Technical Accuracy: Use precise terminology related to the chosen subject matter.
    
    Tone: Authoritative, insightful, and academically rigorous.

podcast_episodes:
  prompt: |
    Find me podcast episodes for the book "{bookTitle}" by {author}.
    I want the response to be only the list of results in JSON format.
    Very very concise with minimal description. Include: title, length, air_date, url, platform, podcast_name, episode_summary (short summary of the podcast episode), podcast_summary (short summary of the podcast itself).
    
    PRIORITIZE episodes from these top book podcasts first (in order of preference):
    1. The Book Club Review (https://podcasts.apple.com/us/podcast/the-book-club-review/id1215730246)
    2. The Book Review by The New York Times (https://podcasts.apple.com/ie/podcast/the-book-review/id120315179)
    3. Book Riot - The Podcast (https://podcasts.apple.com/us/podcast/book-riot-the-podcast/id1330436321)
    4. Overdue (https://podcasts.apple.com/us/podcast/overdue/id1098078103)
    5. Backlisted (https://podcasts.apple.com/us/podcast/backlisted/id892817183)
    6. If Books Could Kill (https://podcasts.apple.com/us/podcast/if-books-could-kill/id1660908304)
    7. World Book Club BBC (https://podcasts.apple.com/us/podcast/world-book-club/id309595551)
    8. Book Club with Michael Smerconish (https://podcasts.apple.com/us/podcast/book-club-with-michael-smerconish/id1522088009)
    9. New Books Network (https://podcasts.apple.com/us/podcast/new-books-network/id150548015)
    10. Reading Glasses (https://podcasts.apple.com/us/podcast/reading-glasses/id1393888875)
    11. Literary Disco (https://podcasts.apple.com/us/podcast/literary-disco/id926207844)
    12. What Should I Read Next? (https://podcasts.apple.com/us/podcast/what-should-i-read-next/id695413960)
    13. האחיות גרים - (https://podcasts.apple.com/us/podcast/%D7%94%D7%90%D7%97%D7%99%D7%95%D7%AA-%D7%92%D7%A8%D7%99%D7%9D/id1473785807)
    14. Critics at Large - The New Yorker (https://podcasts.apple.com/us/podcast/critics-at-large-the-new-yorker/id1704902371)
    
    
    After checking these prioritized podcasts, you may include episodes from other book review / book club type podcasts or deep interviews with the author about the book.
    Only include podcasts from Apple Podcasts.
    IMPORTANT: Include COMPLETE, FULL URLs without truncation. URLs must be complete and functional.
    Verify the links are working and are not broken.
    Return ONLY valid JSON in this format: { "episodes": [{"title": "...", "length": "...", "air_date": "...", "url": "https://complete-full-url-here", "platform": "...", "podcast_name": "...", "episode_summary": "...", "podcast_summary": "..."}, ...] }

related_books:
  prompt: |
    Act as a literary expert and book curator. I need recommendations for books that connect to "{bookTitle}" by {author} from unique and interesting angles.

    Criteria:

    Interesting Angles: Do not just look for "books like this." Look for retellings, shifts in perspective (e.g., the villain's POV), thematic deconstructions, genre-swaps (e.g., a sci-fi version), or meta-fictional responses to the original text.

    Real Books Only: Verify that these books actually exist and are published. Do not hallucinate titles.

    Quality: The books must be highly regarded or interesting on their own merits.

    Return no more than 10 great recommendations.

    Return ONLY valid JSON in this format (no markdown code blocks, no conversational filler, just raw JSON): [{"title": "Book Title", "author": "Author Name", "reason": "A clear smart explanation of the specific angle and connection to the source material. under 100 words."}]

book_research:
  prompt: |
    Task: Conduct a deep-dive research into the book "{bookTitle}" by "{authorName}".

    Methodology: Act as a panel of experts (Scholar, Fact-Checker, Psychologist, and Historian). For each relevant pillar, synthesize perspectives into validated, multi-point data. Choose only pillars that make sense for the Book in question.

    Research Pillar Definitions & Enhancements:

    1. Memorable Quotes: Identify the most popular and culturally significant quotes sourced from reputable quote repositories (e.g., Goodreads, Wikiquote).

    2. About the Author: Focus on the author's background, education, and personal experiences that directly informed this specific book.

    3. Story Behind the Story: Uncover the "spark of life"—the specific events, inspirations, or research that brought this story into existence.

    4. Reception: Analyze critical reviews, awards, and the public's initial versus long-term reaction.

    5. Time of Writing: Contextualize the book within its specific era (political, social, or technological climate when the author wrote it).

    6. World & Setting: Provide factual historical and geographical context for the story's setting. If set in a specific era (e.g., Medieval Russia, Depression-era South), provide the real-world historical data necessary to understand the characters' constraints and environment.

    7. References & Easter Eggs: Identify intertextual references, subtle nods to other works, "Easter egg" phrases, or stylistic homages.

    8. Legacy & Influence: Document how this work affected culture and identify specific later works (books, films, art) that were inspired by it.

    9. Meaning & Insights: Decode the central themes, hidden allegories, and philosophical arguments.

    10. The Ending: Analyze the resolution's impact, whether it is definitive or ambiguous, and its thematic resonance.

    11. Main Characters: Profile key figures, focusing on their internal motivations, primary conflicts, and character arcs.

    12. Psychological Perspective: Apply psychological theories (e.g., CBT, trauma-informed, Jungian) to the characters' behaviors or the author's intent.

    13. Factual Soundness: Verify the accuracy of historical events, scientific claims, or technical details within the text.

    14. Criticism: Identify significant negative critiques, controversies, or points of contention among scholars.

    Output Format: Provide a single JSON object. Each pillar can contain up to 8 distinct items.

    * pillar_name: The name of the subject.

    * content_items: An array of objects (Max 8), each containing:

      * source_url: A valid, reputable URL.

      * trivia_fact: A one-sentence, high-impact "quick grok" fact.

      * deep_insight: A detailed paragraph of context or expert analysis.

    JSON Structure: { "book_title": "", "author": "", "pillars": [ { "pillar_name": "", "content_items": [ { "source_url": "", "trivia_fact": "", "deep_insight": "" } ] } ] }

did_you_know:
  prompt: |
    You are a literary research and trivia assistant inside a book companion app.

    Your task: generate the TOP 10 most impressive, surprising, or highly interesting
    "Did you know?" insights about a given book.

    These are not general themes or summaries. They must be facts, backstories,
    hidden details, unusual influences, author decisions, cultural impact,
    or strange connections that make readers say "I didn't know that."

    INPUT:

    * title: {bookTitle}
    * author: {author}

    WRITING LEVEL:

    * Write for a 15-year-old reader.
    * Use simple, direct language.
    * Avoid academic jargon.
    * Explain why each fact is interesting.

    CONTENT RULES:

    * Each insight must be "Did you know?" style.
    * Focus on surprising facts, origin stories, hidden meanings,
      naming choices, real-world links, controversies, or impact.
    * Prefer verified facts over interpretation.
    * If a detail is not certain, say so clearly.
    * Avoid major spoilers unless unavoidable.

    STRUCTURE RULES:

    * Return exactly 10 insights ranked from most interesting to least.
    * Each insight must be readable on its own with no title.
    * Each insight must contain exactly 3 notes.
    * Each note must be 2–3 sentences long.
    * The 3 notes must connect and flow like a short story:

      * Note 1 = the surprising fact.
      * Note 2 = background or explanation.
      * Note 3 = why it matters or why it's impressive.

    OUTPUT RULES:

    * Return valid JSON only.
    * Do not include markdown or code fences.
    * Use the exact structure below.

    OUTPUT FORMAT:

    {
      "book": "{bookTitle}",
      "author": "{author}",
      "did_you_know_top10": [
        {
          "rank": 1,
          "notes": ["", "", ""]
        },
        {
          "rank": 2,
          "notes": ["", "", ""]
        },
        {
          "rank": 3,
          "notes": ["", "", ""]
        },
        {
          "rank": 4,
          "notes": ["", "", ""]
        },
        {
          "rank": 5,
          "notes": ["", "", ""]
        },
        {
          "rank": 6,
          "notes": ["", "", ""]
        },
        {
          "rank": 7,
          "notes": ["", "", ""]
        },
        {
          "rank": 8,
          "notes": ["", "", ""]
        },
        {
          "rank": 9,
          "notes": ["", "", ""]
        },
        {
          "rank": 10,
          "notes": ["", "", ""]
        }
      ]
    }

    QUALITY BAR:

    * Every item should feel like strong trivia.
    * Prefer counter-intuitive or origin-based facts.
    * Make each 3-note sequence feel like a mini reveal.
    * Avoid repeating the same type of fact.

trivia_questions:
  prompt: |
    You are an expert creator of The Guardian Thursday Quiz-style questions: short (1-2 lines max), witty, punchy, slightly irreverent trivia. Questions are phrased openly but designed for multiple-choice reveal.

    IMPORTANT RULES FOR ANSWERS:
    - The correct_answer MUST be a specific, extractable detail FROM the facts — NOT the author's name, NOT "who wrote the book", NOT just the book title.
    - Focus on quirky elements: real people who inspired characters, objects/symbols (e.g. hat, cat collar, typewriter), locations, numbers (e.g. notebooks, months, rejections), phrases/slogans, research finds, personal mishaps, hidden gems, inspirations from real life, etc.
    - Avoid questions where the answer is simply the author. If a fact is about the author, reframe the question around the DETAIL (e.g. not "who wrote X?", but "what red hunting hat symbol came from sightings of Manhattan eccentrics?").
    - Vary answer types heavily across the 11 questions: people, objects, places, numbers, events, phrases, animals, recipes, etc.
    - Make wrong_answers plausible "close" distractors: similar details from other facts in the list, common literary mix-ups, near-miss inspirations, or logical red herrings.
    - Write the questions in a clear language an 18 years old would understand

    Task: Generate exactly 11 quiz questions about the book "{book_title}" by "{author_name}" by conducting an online search and then, if a "top off" is needed, relying on the provided "facts json".

    For each question:
    - Keep very concise (under 25 words preferred, max 30).
    - Use playful, cheeky, mildly sarcastic tone where fitting.
    - Include book titles in quotes when relevant.
    - Absolutely no questions where the answer is a number or a date.
    - Output ONLY valid JSON—no extra text, explanations, or markdown.

    Output schema (exact structure):
    {
      "questions": [
        {
          "question": "Holden Caulfield's iconic red hunting hat was inspired by sightings of what during lonely Manhattan walks?",
          "source": "search",
          "source_detail": "https://example.com/source",
          "correct_answer": "eccentric characters",
          "wrong_answers": [
            "prep school bullies",
            "Central Park ducks",
            "Greenwich Village poets"
          ]
        },
        {
          "question": "Which real ancient English wall did George R.R. Martin climb to inspire the massive icy barrier in 'A Game of Thrones'?",
          "source": "input_facts",
          "url": "https://example.com/fact-source",
          "correct_answer": "Hadrian's Wall",
          "wrong_answers": [
            "Great Wall of China",
            "Berlin Wall",
            "Antonine Wall"
          ]
        },
        ...
      ]
    }

    facts json:
    {FACTS_JSON}

discussion_questions:
  prompt: |
    You are a professional book club facilitator.

    Generate 10 discussion topics for the book:

    **"{book_title}"** by **"{author_name}"**.

    Return the result as a JSON array.

    Each item should have:
    - id
    - question
    - category (one of: "themes", "characters", "writing style", "ethics", "personal reflection", "real world")

    Guidelines:
    - Questions must be open-ended and spark conversation
    - No trivia or yes/no questions
    - Avoid major spoilers
    - Start easy and get progressively deeper
    - Include at least:
      - 2 about characters
      - 2 about major themes
      - 2 that connect the book to modern life
      - 2 that invite personal reflection
    - Questions should feel natural when read aloud in a group.

    Example output format:
    [
      {
        "id": 1,
        "question": "...",
        "category": "themes"
      }
    ]

book_infographic:
  prompt: |
    You are a literary orientation assistant inside a book companion app.

    Your task is to generate a clear, spoiler-safe ORIENTATION GUIDE that helps a reader follow a book more easily while reading.

    This is not a summary. This is a reader aid. Focus only on:

    * who the important characters are
    * the complete character roster
    * the timeline of early-to-mid plot events

    Do NOT include themes, analysis, or interpretation.

    INPUT:

    * title: {book_title}
    * author: {author_name}

    ---

    ## GLOBAL WRITING RULES

    * Write for a 15-year-old reader
    * Use simple, direct language
    * Avoid academic jargon
    * Prefer short, concrete phrasing
    * No long paragraphs
    * Each field should be readable on its own

    ---

    ## SPOILER RULES

    * Stay spoiler-safe beyond early and mid setup
    * Do NOT reveal twists, hidden identities, or endings
    * If unsure whether something is a spoiler, leave it out or generalize
    * If uncertain, mark text with "inference"

    ---

    ## OUTPUT RULES

    * Return VALID JSON ONLY
    * No markdown
    * No extra commentary
    * Include all three sections even if small
    * Keep arrays non-empty when possible

    ---

    ## REQUIRED JSON STRUCTURE

    {
    "book": "{book_title}",
    "author": "{author_name}",

    "core_cast": [
    {
    "name": "",
    "role": "plain-language role in the story",
    "short_identity": "one-line spoiler-safe description",
    "personality": "1–2 short traits",
    "main_goal": "what they want early in the story",
    "key_connections": [ "names only" ],
    "why_reader_should_track": ""
    }
    ],

    "full_character_list": [
    {
    "name": "",
    "short_identity": "one-line spoiler-safe description",
    "group_or_side": "if applicable, else empty string",
    "importance": "major | supporting | minor"
    }
    ],

    "plot_timeline": [
    {
    "order": 1,
    "phase": "opening | early_setup | early_story | mid_story",
    "event_label": "short event name",
    "what_happens": "2–3 sentence spoiler-safe description",
    "characters_involved": [ "names" ],
    "why_it_helps_orientation": "",
    "icon": "Lucide icon name"
    }
    ]
    }

    ---

    ## SECTION DEFINITIONS

    CORE_CAST:
    List only the most important characters needed to follow the story. Keep it tight and practical.

    FULL_CHARACTER_LIST:
    Include all named characters who appear more than briefly. One line each. No spoilers.

    PLOT_TIMELINE:
    Give an ordered sequence of early-to-late story events that help the reader stay oriented. Focus on setup and direction, not outcomes. Generate at least 10 events the start at the beginning of the story and end at the end of the story.

    For each event, pick ONE icon from this list that best represents the event:
    - Sunrise (beginnings, morning, new start)
    - Sunset (endings, evening, closure)
    - Users (group scenes, meetings, gatherings)
    - UserPlus (introductions, meeting someone new)
    - MapPin (arriving at a location, setting)
    - Compass (journey, travel, exploration)
    - MessageCircle (conversation, dialogue, communication)
    - Swords (conflict, battle, confrontation)
    - Shield (protection, defense, safety)
    - Heart (love, romance, emotional connection)
    - Eye (discovery, observation, realization)
    - AlertTriangle (danger, warning, threat)
    - Home (domestic scenes, returning home)
    - Building (institutions, organizations, city)
    - Skull (death, danger, dark events)
    - Gift (receiving something, surprise)
    - Lock (secrets, imprisonment, restriction)
    - Unlock (revelation, freedom, access)
    - Flag (milestone, achievement, marker)
    - Crown (royalty, power, authority)
    - Flame (passion, destruction, fire)
    - Footprints (tracking, following, pursuit)
    - HandShake (agreement, alliance, deal)
    - Hammer (work, creation, judgment)
    - Key (solution, access, importance)
    - Mountain (challenge, obstacle, achievement)
    - Ship (voyage, journey by sea)
    - Tent (camp, temporary shelter, outdoors)
    - TreePine (nature, forest, wilderness)
    - Wind (change, force of nature, movement)
    - Megaphone (announcement, speech, proclamation)
    - ScrollText (letter, document, written message)
    - Feather (writing, lightness, flight)
    - Scale (justice, balance, judgment)
    - Bomb (explosion, disaster, sudden event)
    - Ghost (supernatural, haunting, past)
    - Wand2 (magic, transformation)
    - Anchor (stability, naval, grounding)
    - BellRing (alarm, announcement, call)
    - Bird (freedom, messenger, nature)
    - Briefcase (business, work, profession)
    - Coffee (casual meeting, pause, rest)
    - Drama (performance, acting, theater)
